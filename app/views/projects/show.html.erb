<h1><%= @project.name %></h1>

<p>
  <%= @project.description %>
</p>

<br>

<%= link_to 'Edit Project', edit_project_path(@project) %>

<br><br>
<h3>Tickets (<%= @project.tickets.size %>)</h3>

<table class="table table-hover table-sm">
  <thead>
    <tr>
      <th>Title</th>
      <th>Submitter</th>
      <th>Status</th>
      <th>Priority</th>
      <th>Created</th>
      <th>Assignee</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tickets.each do |ticket| %>
      <tr class=<%= row_color(ticket.priority) unless ticket.status == "resolved"%>>
        <td><%= ticket.title %></td>
        <td><%= ticket.user.username %></td>
        <td><%= format_status(ticket.status) %></td>
        <td><%= ticket.priority.capitalize %></td>
        <td><%= time_ago_in_words(ticket.created_at) %> ago</td>
        <td><%= ticket.assignees.map(&:username).first %></td>
        <td><%= link_to 'Show', [@project, ticket] %></td>
        <td><%= link_to 'Edit', edit_project_ticket_path(@project, ticket) %></td>
        <td><%= link_to 'Destroy', [@project, ticket], method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Ticket', new_project_ticket_path(@project) %>

<br>

<%= link_to 'Projects', projects_path %>
